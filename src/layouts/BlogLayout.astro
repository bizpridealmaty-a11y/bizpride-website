---
import Layout from './Layout.astro';

const { title, description, pubDate, author = "BizPride Club", image = "https://bizpride.kz/logo.png" } = Astro.props;

// Create JSON-LD Article Schema
const schema = {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": title,
    "description": description,
    "image": image,
    "author": {
        "@type": "Organization",
        "name": author,
        "url": "https://bizpride.kz"
    },
    "publisher": {
        "@type": "Organization",
        "name": "BizPride Club",
        "logo": {
            "@type": "ImageObject",
            "url": "https://bizpride.kz/logo.png"
        }
    },
    "datePublished": pubDate,
    "dateModified": pubDate
};
---
<Layout title={title} description={description} navTheme="dark">
    <!-- Inject Article Schema -->
    <script type="application/ld+json" set:html={JSON.stringify(schema)} />

    <section class="section-dark" style="padding-top: 140px; padding-bottom: 60px;">
        <div class="container container-small" style="max-width: 800px; margin: 0 auto;">
            <a href="/about" style="color: var(--text-muted); text-decoration: none; font-size: 14px; margin-bottom: 30px; display: inline-flex; align-items: center; gap: 8px; transition: color 0.2s;" onmouseover="this.style.color='#fff'" onmouseout="this.style.color='var(--text-muted)'">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                К статьям (Блог)
            </a>
            
            <h1 class="heading-md" style="font-size: clamp(36px, 6vw, 56px); line-height: 1.1; margin-bottom: 24px; color: #fff;">{title}</h1>
            
            <div style="display: flex; gap: 16px; align-items: center; margin-bottom: 40px; color: var(--text-muted); font-size: 14px;">
                <span style="font-weight: 600; color: var(--red);">{author}</span>
                <span>&bull;</span>
                <time datetime={pubDate}>{new Date(pubDate).toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric' })}</time>
                <span>&bull;</span>
                <span>Время чтения: ~{Math.ceil(Astro.props.wordCount / 150) || 5} мин</span>
            </div>
            
            {image && image !== "https://bizpride.kz/logo.png" && (
                <div style="border-radius: 20px; overflow: hidden; margin-bottom: 40px; border: 1px solid rgba(255,255,255,0.1);">
                    <img src={image} alt={title} style="width: 100%; height: auto; display: block;" />
                </div>
            )}
            
            <article class="prose-blog">
                <slot />
            </article>
        </div>
    </section>
    
    <style is:global>
        .prose-blog {
            color: var(--text-light);
            font-size: 18px;
            line-height: 1.7;
        }
        .prose-blog h2 {
            font-size: 28px;
            color: #fff;
            margin-top: 48px;
            margin-bottom: 20px;
            font-weight: 800;
        }
        .prose-blog h3 {
            font-size: 22px;
            color: #fff;
            margin-top: 36px;
            margin-bottom: 16px;
            font-weight: 700;
        }
        .prose-blog p {
            margin-bottom: 24px;
        }
        .prose-blog ul, .prose-blog ol {
            margin-bottom: 24px;
            padding-left: 24px;
        }
        .prose-blog li {
            margin-bottom: 12px;
        }
        .prose-blog li::marker {
            color: var(--red);
        }
        .prose-blog strong {
            color: #fff;
            font-weight: 600;
        }
        .prose-blog a {
            color: var(--red);
            text-decoration: underline;
            text-decoration-color: rgba(241, 70, 53, 0.3);
            text-underline-offset: 4px;
            transition: text-decoration-color 0.2s;
        }
        .prose-blog a:hover {
            text-decoration-color: var(--red);
        }
        .prose-blog blockquote {
            border-left: 4px solid var(--red);
            padding-left: 20px;
            margin: 32px 0;
            font-style: italic;
            color: #ddd;
            background: rgba(255, 255, 255, 0.03);
            padding: 24px 24px 24px 20px;
            border-radius: 0 12px 12px 0;
        }
        .prose-blog .faq-item {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 16px;
        }
        .prose-blog .faq-item h3 {
            margin-top: 0;
            color: var(--red);
            font-size: 18px;
            margin-bottom: 12px;
        }
        .prose-blog .faq-item p:last-child {
            margin-bottom: 0;
        }
    </style>
</Layout>
